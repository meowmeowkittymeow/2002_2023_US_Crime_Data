"0","#| label: Joining 2020 and 2023 data"
"0","#| message: false"
"0",""
"0","# Creating list of cities in previous table"
"0","Cities <- c(""New York, New York"", ""Los Angeles, California"", ""Chicago, Illinois"", ""Houston, Texas"", ""Philadelphia, Pennsylvania"", ""San Francisco, California"", ""Baltimore, Maryland"", ""Washington, District of Columbia"", ""Atlanta, Georgia"", ""Detroit, Michigan"", ""New Orleans, Louisiana"", ""Memphis, Tennessee"", ""Seattle, Washington"")"
"0",""
"0","# Using left-join to include only the cities in both data frames, as they have different counts"
"0","Changes_Reported_Murders_Cities <- left_join(Reported_Murders_Large_Cities_2020, Reported_Murders_Large_Cities_2023, by = ""City"") |>"
"0","  drop_na() |> # Dropping cities missing data"
"0","  mutate(Change_Murder_Rate_2020_2023 = (Murder_Rate_2023 - Murder_Rate_2020) / Murder_Rate_2020) |>"
"0","  filter(City %in% Cities) |> #Filter out all irrelevant cities"
"0","  select(-Population_2020, -Murders_2020, -Population_2023, -Murders_2023, )"
"0",""
"0","# Loading in 2020 data for Atlanta, Baltimore, and Philadelphia and calculating 2020 murder rates and 2020-2023 change"
"0",""
"0","Changes_Reported_Murders_ABP_Path <- here(""Data_Raw"", ""Change_Murder_Rate_2020_2022_ABP.xlsx"")"
"0",""
"0","Changes_Reported_Murders_ABP <- read_excel(Changes_Reported_Murders_ABP_Path)"
"0",""
"0","# Extracting just Atlanta, Baltimore, and Phladelphia from 2023 Table 8"
"0","ABP <- c(""Atlanta, Georgia"", ""Baltimore, Maryland"", ""Philadelphia, Pennsylvania"")"
"0",""
"0","Murder_Rate_2023_ABP <- Reported_Murders_Large_Cities_2023 |>"
"0","  filter(City %in% ABP) |>"
"0","  select(City, Murder_Rate_2023)"
"0",""
"0","# Calculating 2020 murder rates using 2022 murder rates from website graph"
"0","Changes_Reported_Murders_ABP <- Changes_Reported_Murders_ABP |>"
"0","  mutate(Murder_Rate_2020 = Murder_Rate_2022 / (1 + Change_Murder_Rate_2020_2022),"
"0","         Change_Murder_Rate_2020_2022 = (Murder_Rate_2022 - Murder_Rate_2020) / Murder_Rate_2020) |>"
"0","  select(-Change_Murder_Rate_2020_2022)"
"0",""
"0","Changes_Reported_Murders_ABP <- inner_join(Changes_Reported_Murders_ABP, Murder_Rate_2023_ABP) "
"0",""
"0","Changes_Reported_Murders_ABP <- Changes_Reported_Murders_ABP |>"
"0","  mutate(Change_Murder_Rate_2020_2023 = (Murder_Rate_2023 - Murder_Rate_2020) / Murder_Rate_2020) |>"
"0","  select(-Murder_Rate_2022)"
"0",""
"0","#Binding city tables"
"0","City_Changes_Reported_Murders_2020_2023 <- rbind(Changes_Reported_Murders_Cities, Changes_Reported_Murders_ABP)"
"0",""
"0","# Saving output to Data_Clean for easier access"
"0","City_Changes_Reported_Murders_2020_2023_excel_path <- here(""Data_Clean"", ""City_Changes_Reported_Murders_2020_2023.xlsx"")"
"0","write_xlsx(City_Changes_Reported_Murders_2020_2023, City_Changes_Reported_Murders_2020_2023_excel_path)"
