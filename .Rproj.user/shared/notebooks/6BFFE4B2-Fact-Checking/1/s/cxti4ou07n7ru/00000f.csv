"0","#| label: Reading and joining 2020 and 2023 regional crime data, and 2023 national data"
"0",""
"0","## Regional Crime:"
"0","Regional_Crime_2020_2023_Path <- here(""Data_Raw"", ""Changes_2020_2023_Regional_Crime.xlsx"")"
"0",""
"0","Regional_Crime_2020_2023 <- read_excel(Regional_Crime_2020_2023_Path)"
"0",""
"0","# Calculate all regional rates"
"0","Regional_Crime_2020_2023 <- Regional_Crime_2020_2023 |>"
"0","  mutate(across(c(Murders, Violent_Crimes, Property_Crimes), "
"0","                ~ ifelse(Population > 0, (.x * 100000/Population), 0), "
"0","                .names = ""{.col}_Rate""))"
"0","                # .names specifies naming convention"
"0","                # {.col.} = Name of column"
"0",""
"0","## National Crime:"
"0",""
"0","# Removing data for all years prior to 2020 and 2021-2022"
"0","National_Crime_2020_2023 <- CIUS_2001_2023[-c(1:19, 21:22), ] |>"
"0","  mutate(Region = NA) |>"
"0","  rename("
"0","    Violent_Crimes_per_100k = Violent_Crimes_Rate_per_100k,"
"0","    Murders_per_100k = Murders_Rate_per_100k,"
"0","    Property_Crimes_per_100k = Property_Crimes_Rate_per_100k"
"0","  )"
"0",""
"0","# Calculate national rates"
"0","National_Crime_2020_2023 <- National_Crime_2020_2023 |>"
"0","  mutate(across(c(Murders, Violent_Crimes, Property_Crimes), "
"0","                ~ ifelse(Population > 0, (.x * 100000/ Population), 0), "
"0","                .names = ""{.col}_Rate""))"
"0","                # .names specifies naming convention"
"0","                # {.col.} = Name of column"
"0",""
"0","# Adding region variable and filling as national to join dataframes"
"0","National_Crime_2020_2023$Region <- ""National"""
"0",""
"0","Crime_Rates_2020_2023 <- rbind(Regional_Crime_2020_2023, National_Crime_2020_2023)"
